import numpy as np
import matplotlib.pyplot as plt
from collections import Counter

testdata = [21.959384499160468, 31.23956701424158, 23.63591632187622, 36.46821490673444, 17.714056417303343, 31.44170391314962, 21.78020031891186, 33.213397759738264,
25.20630552859312, 36.558816149350534, 19.332572350434354, 32.25325633655492, 24.73645685241186, 35.33291181124776, 23.79257560586339, 38.10372825362463,24.557612968127465,
36.73144402805611, 20.191281253428173, 35.06966921830237, 25.813562951888365, 35.561029988644336, 24.923378667802954, 34.463907946680294, 25.311244044578427, 34.117212558131975,
22.819091361866796, 34.25516433025548, 19.639358214988224, 34.56117030001663, 18.341233265627693, 31.399261188293124, 22.723629043769336, 34.83845262048311, 25.82936770950206, 
33.16210202637511, 20.23890182459327, 32.78945132868386, 17.905128921789093, 28.88813385482529, 24.385289647525166, 37.335669057387726, 26.525412887538252, 35.2192205449002,
19.299333494980544, 30.486337996080024, 20.118681851201636, 31.89116680793916, 22.980962976720388, 35.3191819848619, 17.96926166354966, 32.48406633310577, 21.58631807419169,
30.975094109600928, 18.659636883604406, 33.04492931889734, 19.209914415003638, 31.420355685575746, 18.16229126686346, 29.93643755301725, 19.120619567709372, 30.699542112256864,
25.17676132371397, 34.393601274285054, 18.583516818010633, 31.317010181098944, 24.68867147060795, 35.363481550256644, 23.02865997158701, 35.4082866561793, 20.282109030336354,
33.18796105898338, 17.672876665469843, 32.67247775608707, 20.795121649361587, 32.493051910886486, 20.101930916301317, 31.19190374413498, 20.39204407747099, 32.08774193592624,
23.868174335146136, 35.449698119416254, 26.388368121945867, 35.62090746957761, 25.567802785102412, 35.66631613405574, 23.99071038023876, 35.06411342600334, 23.792145242488125,
35.107650004447365, 24.111063562798908, 31.418267572382227, 20.098954730848863, 33.067467402673685, 20.88810038727894, 32.644004609994596, 24.587154114074174, 35.61397200548726,
21.65956855815321, 36.81907508404582, 18.59843317023302, 32.60944545701523, 21.069573240979203, 32.21936612110862, 24.87225986527509, 36.149522366845794, 20.276898330625336,
33.84658247356705, 19.592545899041802, 30.59392660926762, 20.323269906838078, 32.29574812465895, 21.35018601896744, 33.94708664610186, 20.1569063412357, 31.639314277796213,
18.929553010373773, 33.331523282909906, 22.121125492746756, 34.690328304537594, 19.499062316347583, 31.139578977011656, 26.517189386365075, 34.7011323493234, 23.388322747322558,
36.769999842308025, 20.579090632339703, 30.771060416224586, 20.240420339246214, 33.87654102727224, 24.59096971887165, 33.61859674823029, 25.116586706562245, 36.20121874558056,
25.557501503948984, 36.39246631338593, 24.387651550868913, 33.2827564295772, 19.69944356712352, 30.714803909172808, 22.826788929142136, 37.16482263385777, 24.609041154081922,
36.104823979389685, 19.893039297257797, 30.792717627266093, 20.554378047506688, 31.190868044454003, 19.55060327163345, 34.602756266320824, 23.619820901736276, 36.98566859418098,
25.15076144887497, 33.89409391341271, 24.47796159427686, 35.32146634770389, 24.004087953898246, 35.618803262029324, 20.759216855120783, 32.46166610892119, 22.493387946548573,
36.78517041843648, 20.008781128403864, 32.15292152986537, 22.42591934771403, 34.789785253591695, 22.15365577923418, 37.131777154514445, 19.56686423226426, 30.326934442372128,
24.991105175469915, 34.10979431232785, 25.5491811833759, 33.52624549604696, 21.762001750531006, 33.05861298355044, 18.989418138097026, 30.90556767082746, 20.216002852334192,
33.41610156154373, 19.689909518113225, 31.931042667213433, 25.922634453956498, 35.2215760062586, 20.670175582205307, 32.56517816055985, 26.5173046073707, 35.18452932633369,
19.615470460641276, 31.431998074581394, 19.63004376836659, 33.17007380684688, 23.213535136458052, 30.885396636777646, 20.286130095999752, 32.05337469378953, 21.23487155577698,
36.5105588800243, 21.735098682375444, 36.51127780882874, 18.310337204918557, 32.21783772801109, 19.510846016895872, 29.897476657136767, 24.686621418656394, 33.104763826036056,
23.417849657642716, 30.787174197048245, 27.194383786280955, 36.267507265697255, 22.943474306364404, 37.07911595862419, 18.424438779822488, 31.79940219340467, 23.506242342727596,
34.65976495915212, 22.091553997471266, 31.28659385225738, 23.982852691650397, 36.01635437187656, 22.69081372502663, 35.561787418827784, 25.23472228644244, 32.641361593924174,
25.094170820930774, 34.58523945069137, 21.19030359241021, 35.40347944144049, 23.22258522384455, 30.98700760873653, 23.6967469082275, 32.52744160379351, 21.07884990354048,
32.02998372994636, 16.866105280907732, 28.984730409305136, 25.102866296361412, 33.30022994232253, 25.276930013476704, 35.131360854176535, 19.213188999276543, 31.71415755285442,
19.245073847748515, 32.58876412530819, 25.31359693611633, 35.516462459726284, 18.43905922308554, 30.82782241883467, 19.64717255190365, 32.82976709158487, 23.729020953235672,
40.1471703193656, 24.77859198674412, 34.15166673260206, 20.860495554922544, 29.030638237258632, 24.601954468608902, 32.78817486174627, 21.78836263199249, 32.339722449295664,
23.10295249458573, 34.771846982043876, 20.01813734259072, 32.22092994622254, 23.846379201803554, 36.1414458257896, 23.783158802270272, 36.043496466883504, 24.961373776424374,
33.9228476372155, 25.023623126719983, 34.28266788814326, 18.836400960218388, 35.028108243261656, 23.062887108583702, 35.04075442599907, 23.114574183632723, 35.530813208835745,
23.64067859798334, 38.192278809575996, 23.631672104136165, 34.52980905331491, 20.411629224757448, 32.263992292489995, 19.574019952530243, 31.935886159584427, 21.457545842765146,
31.659809960209728, 18.124817511542226, 31.997288449746307, 18.990689973799388, 32.387963045016726, 23.541999631800756, 32.4751927528317, 19.64060341428934, 30.2915567287162,
21.989953947825015, 33.64590281447322, 22.30210323807139, 32.73237945145149]
width = [21.959384499160468, 23.63591632187622, 17.714056417303343, 21.78020031891186, 25.20630552859312, 19.332572350434354, 24.73645685241186, 23.79257560586339,
         24.557612968127465, 20.191281253428173, 25.813562951888365, 24.923378667802954, 25.311244044578427, 22.819091361866796, 19.639358214988224, 18.341233265627693,
         22.723629043769336, 25.82936770950206, 20.23890182459327, 17.905128921789093, 24.385289647525166, 26.525412887538252, 19.299333494980544, 20.118681851201636,
         22.980962976720388, 17.96926166354966, 21.58631807419169, 18.659636883604406, 19.209914415003638, 18.16229126686346, 19.120619567709372, 25.17676132371397,
         18.583516818010633, 24.68867147060795, 23.02865997158701, 20.282109030336354, 17.672876665469843, 20.795121649361587, 20.101930916301317, 20.39204407747099,
         23.868174335146136, 26.388368121945867, 25.567802785102412, 23.99071038023876, 23.792145242488125, 24.111063562798908, 20.098954730848863, 20.88810038727894,
         24.587154114074174, 21.65956855815321, 18.59843317023302, 21.069573240979203, 24.87225986527509, 20.276898330625336, 19.592545899041802, 20.323269906838078,
         21.35018601896744, 20.1569063412357, 18.929553010373773, 22.121125492746756, 19.499062316347583, 26.517189386365075, 23.388322747322558, 20.579090632339703,
         20.240420339246214, 24.59096971887165, 25.116586706562245, 25.557501503948984, 24.387651550868913, 19.69944356712352, 22.826788929142136, 24.609041154081922,
         19.893039297257797, 20.554378047506688, 19.55060327163345, 23.619820901736276, 25.15076144887497, 24.47796159427686, 24.004087953898246, 20.759216855120783,
         22.493387946548573, 20.008781128403864, 22.42591934771403, 22.15365577923418, 19.56686423226426, 24.991105175469915, 25.5491811833759, 21.762001750531006,
         18.989418138097026, 20.216002852334192, 19.689909518113225, 25.922634453956498, 20.670175582205307, 26.5173046073707, 19.615470460641276, 19.63004376836659,
         23.213535136458052, 20.286130095999752, 21.23487155577698, 21.735098682375444, 18.310337204918557, 19.510846016895872, 24.686621418656394, 23.417849657642716,
         27.194383786280955, 22.943474306364404, 18.424438779822488, 23.506242342727596, 22.091553997471266, 23.982852691650397, 22.69081372502663, 25.23472228644244,
         25.094170820930774, 21.19030359241021, 23.22258522384455, 23.6967469082275, 21.07884990354048, 16.866105280907732, 25.102866296361412, 25.276930013476704,
         19.213188999276543, 19.245073847748515, 25.31359693611633, 18.43905922308554, 19.64717255190365, 23.729020953235672, 24.77859198674412, 20.860495554922544,
         24.601954468608902, 21.78836263199249, 23.10295249458573, 20.01813734259072, 23.846379201803554, 23.783158802270272, 24.961373776424374, 25.023623126719983,
         18.836400960218388, 23.062887108583702, 23.114574183632723, 23.64067859798334, 23.631672104136165, 20.411629224757448, 19.574019952530243, 21.457545842765146,
         18.124817511542226, 18.990689973799388, 23.541999631800756, 19.64060341428934, 21.989953947825015, 22.30210323807139]
height = [31.23956701424158, 36.46821490673444, 31.44170391314962, 33.213397759738264, 36.558816149350534, 32.25325633655492, 35.33291181124776, 38.10372825362463,
          36.73144402805611, 35.06966921830237, 35.561029988644336, 34.463907946680294, 34.117212558131975, 34.25516433025548, 34.56117030001663, 31.399261188293124,
          34.83845262048311, 33.16210202637511, 32.78945132868386, 28.88813385482529, 37.335669057387726, 35.54, 31.317010181098944, 35.363481550256644, 35.4082866561793,
          33.18796105898338, 32.67247775608707, 32.493051910886486, 31.19190374413498, 32.08774193592624, 35.449698119416254, 35.62090746957761, 35.66631613405574,
          35.06411342600334, 35.107650004447365, 31.418267572382227, 33.067467402673685, 32.644004609994596, 35.61397200548726, 36.81907508404582, 32.60944545701523,
          32.21936612110862, 36.149522366845794, 33.84658247356705, 30.59392660926762, 32.29574812465895, 33.94708664610186, 31.639314277796213, 33.331523282909906,
          34.690328304537594, 31.139578977011656, 34.7011323493234, 36.769999842308025, 30.771060416224586, 33.87654102727224, 33.61859674823029, 36.20121874558056,
          36.39246631338593, 33.2827564295772, 30.714803909172808, 37.16482263385777, 36.104823979389685, 30.792717627266093, 31.190868044454003, 34.602756266320824,
          36.98566859418098, 33.89409391341271, 35.32146634770389, 35.618803262029324, 32.46166610892119, 36.78517041843648, 32.15292152986537, 34.789785253591695,
          37.131777154514445, 30.326934442372128, 34.10979431232785, 33.52624549604696, 33.05861298355044, 30.90556767082746, 33.41610156154373, 31.931042667213433,
          35.2215760062586, 32.56517816055985, 35.18452932633369, 31.431998074581394, 33.17007380684688, 30.885396636777646, 32.05337469378953, 36.5105588800243,
          36.51127780882874, 32.21783772801109, 29.897476657136767, 33.104763826036056, 30.787174197048245, 36.267507265697255, 37.07911595862419, 31.79940219340467,
          34.65976495915212, 31.28659385225738, 36.01635437187656, 35.561787418827784, 32.641361593924174, 34.58523945069137, 35.40347944144049, 30.98700760873653,
          32.52744160379351, 32.02998372994636, 28.984730409305136, 33.30022994232253, 35.131360854176535, 31.71415755285442, 32.58876412530819, 35.516462459726284,
          30.82782241883467, 32.82976709158487, 40.1471703193656, 34.15166673260206, 29.030638237258632, 32.78817486174627, 32.339722449295664, 34.771846982043876,
          32.22092994622254, 36.1414458257896, 36.043496466883504, 33.9228476372155, 34.28266788814326, 35.028108243261656, 35.04075442599907, 35.530813208835745,
          38.192278809575996, 34.52980905331491, 32.263992292489995, 31.935886159584427, 31.659809960209728, 31.997288449746307, 32.387963045016726, 32.4751927528317,
          30.2915567287162, 33.64590281447322, 32.73237945145149]
pokemon = [0, 1, 0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 0, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 0, 0, 1, 1, 0, 0, 1, 0, 0,
           0, 0, 0, 0, 1, 0, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 0, 0, 0, 1, 1, 1, 1, 0, 1, 0, 1, 1, 0, 1, 1, 0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 1, 1, 0, 1, 0, 1,
           1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 1, 1, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0]
pokespec = list(zip(testdata[0::2], testdata[1::2]))
pikaw = [25, 24.3, 22]
pikah = [32, 31.5, 34]
pichuw = [20.5]
pichuh = [34]
pikadim = list(zip(pikaw, pikah))
pichudim = list(zip(pichuw, pichuh))
sortpika = []
sortpichu = []
oklassad = []
pred = []
def eucdist(td, fd):
    return np.sqrt((td[0] - fd[0])**2 + (td[1] - fd[1])**2)

print('Du har fångat en pokemon men vet inte om det är en pikachu eller en pichu. Följ anvisningarna i din pokedex för att klassificera den.')
while True:
    try:
        bredd = float(input('För in dess bredd i cm: '))
        if not 0 < bredd <= 100:
            raise ValueError('Bredden måste anges i siffror från 1-100.')
        höjd = float(input('För in dess längd i cm: '))
        if not 0 < höjd <= 100:
            raise ValueError('Längden måste anges i siffror från 1-100.')
        break
    except ValueError as err:
        print(err)
pokedex = [(bredd, höjd)]
pokedexpika = []
pokedexpichu = []

def kNP(pokedex, pokespec, pokemon, k=10):
    dists = [(eucdist(pokedex, other), lab) for other, lab in zip(pokespec, pokemon)]
    dists.sort(key=lambda x: x[0])
    k_nearest = [(other, lab) for _, other,  lab in dists[:k]]
    pred2 = Counter([lab for _, lab in k_nearest]).most_common(1)[0][0]
    return k_nearest, pred2

pred_kNP = [kNP(ex, pokespec, pokemon, k=10) for ex in pokespec]
rättklassad_kNP = sum(a == b for a, b in zip(pred_kNP, pokemon))
träffsäkerhet_kNP = rättklassad_kNP / len(pokemon)
print(f'Träffsäkerheten med kNP (k=10) är {träffsäkerhet_kNP*100:.2f}%')
for ex, pokemon in zip(pokespec, pokemon):
    if pokemon == 1:
        plt.scatter(ex[0], ex[1], color='yellow', label="Pikachu")
    else:
        plt.scatter(ex[0], ex[1], color='tan', label="Pichu")
if pokedexpika:
    plt.scatter(*zip(*pokedexpika), color="yellow", label="Klassificerad Pikachu")
if pokedexpichu:
    plt.scatter(*zip(*pokedexpichu), color="tan", label="Klassificerad Pichu")
if oklassad:
    plt.scatter(*zip(*oklassad), color="black", label="Icke klassificerbar")
#while True:
#    for ex in pokedex:
#        minpika = min(eucdist(ex, ref) for ref in pikadim)
#        minpichu = min(eucdist(ex, ref) for ref in pichudim)
#        if minpika < minpichu:
#            pokedexpika.append(ex)
#            print('Det var en Pikachu')
 #       elif minpichu < minpika:
  #          pokedexpichu.append(ex)
   ##    else:
     #       oklassad.append(ex)
      #      print('Det var en möjligtvis legendarisk pokemon då den inte kunde klassificeras')
   # break

plt.scatter(*zip(*pichudim), color="black", marker="X", s=75, label="Pichu ref")

plt.xlabel("Width")
plt.ylabel("Height")
plt.legend()
plt.gca().set_aspect("equal")
plt.show()